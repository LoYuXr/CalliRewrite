tianshou 有一处使用shimmy需要修改一下:
tianshou/env/venvs.py  def _patch_env_generator def patched:

if gym_version >= packaging.version.parse("0.26.0"):
            return shimmy.GymV26CompatibilityV0(env=env)
        elif gym_version >= packaging.version.parse("0.22.0"):
            return shimmy.GymV21CompatibilityV0(env=env) ## modify 21!!
        




然后shimmy openai_gym_compatibility.py   shimmy tianshou/env/venvs.py/patch_env_generator/patched

def step(self, action: ActType) -> tuple[Any, float, bool, bool, dict]:
        """Steps through the environment.

        Args:
            action: action to step through the environment with

        Returns:
            (observation, reward, terminated, truncated, info)
        """
        reoc = self.gym_env.step(action)  ## modify here!!
        if len(reoc)==5:
            obs, reward, terminate, truncate, info  =  reoc
            return (
                obs,
                reward,
                terminate,
                truncate,
                info,
            )
        
        obs, reward, done, info  = reoc

        # if self.render_mode is not None:
        #     self.render()

        # obs, reward, done, info = self.gym_env.step(action)

        # if self.render_mode is not None:
        #     self.render()

        return convert_to_terminated_truncated_step_api((obs, reward, done, info))

装包的时候
Ubuntu使用gym保存视频报错“Unknown encoder ‘libx264‘”
conda uninstall ffmpeg
conda install -c conda-forge ffmpeg